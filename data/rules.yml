version: "3.1"

rules:

# ********** Estructura de la conversación

# iniciar

- rule: iniciar
  steps:
  - intent: iniciar
  - action: utter_iniciar
  
# charla_cortez  

- rule: charla_cortez
  steps:
  - intent: charla_cortez
  - action: utter_charla_cortez
  
# charla_neumatica  
  
- rule: charla_neumatica
  steps:
  - intent: charla_neumatica
  - action: utter_charla_neumatica
  
# validacion_usuario  
   
# Formulario de usuario

- rule: activar_formulario_usuario
  steps:
  - intent: tipo_servicio 
  - action: utter_servicio
  - action: formulario_usuario
  - active_loop: formulario_usuario
  
- rule: desactivar_formulario_usuario  
  condition:
  - active_loop: formulario_usuario
  steps:
  - action: formulario_usuario
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_solicita_confirmacion
  - action: utter_nombre_usuario
  - action: utter__tipo_usuario
  - action: utter_tipo_servicio
      
#- rule: camino_no_feliz_en_formulario_usuario
#  condition:
#  - active_loop: formulario_usuario
#  steps: 
#  - intent: charla
#  - action: utter_charla
#  - action: formulario_usuario
#  - active_loop: formulario_usuario  

# servicio    
      
# finalizar    
  
- rule: finalizar
  steps:
  - intent: finalizar
  - action: utter_finalizar   
    
# Conversación general

- rule: recepción_confirmacion
  steps:
  - intent: confirmacion
  - action: utter_recepcion_confirmacion
  
- rule: recepción_afirmacion
  steps:
  - intent: afirmacion
  - action: utter_recepcion_afirmacion
  
- rule: recepción_negacion
  steps:
  - intent: negacion
  - action: utter_recepcion_negacion  
  
- rule: recepción_duda
  steps:
  - intent: duda
  - action: utter_recepcion_duda    

# Acciones personalizadas

#- rule: iniciar  
#  steps:
#  - intent: iniciar
#  - action: action_iniciar 
  
#- rule: crear_agente
#  steps:
#  - intent: crear_agente
#  - action: action_crear_agente   
  
#- rule: crear_ventana_base
#  steps:
#  - intent: crear_ventana_base 
#  - action: action_crear_ventana_base  
  
  
  